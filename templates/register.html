<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register — Disaster Alert</title>

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.min.css"/>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.2.1/css/intlTelInput.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js"></script>

<style>
body {
    background: radial-gradient(circle at top, #4db8ff, #003566 60%, #001d3d);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: "Poppins", sans-serif;
    padding: 20px;
}

.glass-card {
    width: 100%;
    max-width: 950px;
    padding: 45px;
    border-radius: 24px;
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.18);
    box-shadow: 0 0 25px rgba(0, 153, 255, 0.3);
    animation: fadeUp 0.7s ease;
}

@keyframes fadeUp {
    from { opacity: 0; transform: translateY(25px); }
    to { opacity: 1; transform: translateY(0); }
}

h3 {
    text-align: center;
    font-size: 36px;
    color: #fff;
    font-weight: 700;
    margin-bottom: 30px;
    text-shadow: 0px 0px 10px #82eefd;
}

.input-wrapper {
    position: relative;
    margin-bottom: 40px;
}

.input-wrapper i.input-icon {
    position: absolute;
    left: 22px;
    top: 50%;
    transform: translateY(-50%);
    color: #cfe9ff;
    font-size: 20px;
    pointer-events: none;
}

/* ⭐ Uniform status message for all fields */
.input-wrapper .status-text {
    position: absolute;      /* position relative to input wrapper */
    left: 45px;              /* align with input text */
    top: 100%;               /* place below the input */
    margin-top: 4px;         /* small gap below input */
    font-size: 15px;         /* slightly smaller than input text */
    line-height: 1.3;
    font-weight: 600;        /* keep bold for visibility */
    white-space: normal;     /* allow wrapping */
    max-width: 250px;        /* prevent overflowing input area */
}

/* ⭐ Matching color styles (same used by password strength) */
.input-wrapper.success .status-text { color: #4dff91; }
.input-wrapper.error .status-text { color: #ff6b6b; }
.input-wrapper.warning .status-text { color: #ffe066; }

.input-wrapper.success .form-control {
    border-color: #4dff91;
    box-shadow: 0 0 8px #4dff91;
}
.input-wrapper.error .form-control {
    border-color: #ff6b6b;
    box-shadow: 0 0 8px #ff6b6b;
}
.input-wrapper.warning .form-control {
    border-color: #ffe066;
    box-shadow: 0 0 8px #ffe066;
}

.form-control {
    background: rgba(255, 255, 255, 0.12);
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.25);
    height: 54px;
    padding-left: 55px;
    font-size: 16px;
    border-radius: 14px;
    backdrop-filter: blur(5px);
    transition: 0.3s;
}

.form-control:focus {
    border-color: #00eaff;
    box-shadow: 0 0 12px #00eaff;
    background: rgba(255, 255, 255, 0.22);
}

.form-control::placeholder {
    color: #d7eaff;
}

.toggle-pass {
    position: absolute;
    right: 18px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    color: #d1d5db;
    font-size: 18px;
}

#registerButton {
    background: linear-gradient(135deg, #1be4ff, #0077ff);
    border: none;
    height: 54px;
    font-size: 18px;
    font-weight: 600;
    border-radius: 14px;
    color: #002244;
    box-shadow: 0 0 12px #1be4ff;
    transition: 0.25s;
}

#registerButton:hover {
    filter: brightness(1.15);
    transform: translateY(-2px);
}

#registerButton:disabled {
    background: gray !important;
    box-shadow: none;
}

.text-success { color: #4dff91 !important; }
.text-danger { color: #ff6b6b !important; }
.text-warning { color: #ffe066 !important; }

.login-link {
    text-align: center;
    color: #e6f6ff;
    margin-top: 20px;
    font-size: 16px;
}

.login-link a {
    color: #79f7ff;
    text-decoration: underline;
}

/* Password strength indicator uniform look */
#pass_strength {
    position: absolute;    /* position relative to input wrapper */
    left: 45px;            /* align with input text */
    top: 100%;             /* just below the input field */
    margin-top: 4px;       /* small gap below input */
    font-size: 15px;       /* slightly smaller than input text */
    line-height: 1.3;
    font-weight: 600;      /* keep bold for visibility */
    white-space: normal;   /* allow text wrapping if needed */
    max-width: 250px;      /* prevent overflowing input area */
}

/* Location status box */
#loc_status {
    border-radius: 14px;
    padding: 12px;
    font-size: 15px;
    margin-bottom: 15px;
}

 /* Make sure country list is hidden until user clicks */
.iti {
  width: 100% !important;
}

/* increase left padding to make space for flag + code */
#mobile {
    padding-left: 95px !important;  /* shifted more to right */
}
/* keep dropdown list visible */
.iti__country-list {
  z-index: 9999 !important;
}

/* fix text alignment when separate dial code is used */
.iti--separate-dial-code input {
    padding-left: 105px !important; /* extra space for +XX dial code */
}
/* prevent background conflict */
.iti input {
  background: transparent !important;
}
</style>

</head>

<body>

    <div class="glass-card">
        <h3>Create Your Account</h3>

        <div id="loc_status" class="alert d-none"></div>

        <form id="registerForm" action="/register" method="POST" autocomplete="off">
            <div class="row g-4 row-cols-2">

                <!-- USERNAME -->
                <div class="col input-wrapper">
                    <i class="fa fa-user input-icon"></i>
                    <input id="username" name="username" class="form-control" placeholder="Username" required minlength="3" />
                    <div id="username_status" class="status-text"></div>
                </div>

                <!-- FULL NAME -->
<div class="col input-wrapper">
    <i class="fa fa-id-card input-icon"></i>
    <input id="name" name="name" class="form-control" placeholder="Full Name" required />
    <div id="name_status" class="status-text"></div>
</div>

                <!-- EMAIL -->
                <div class="col input-wrapper">
                    <i class="fa fa-envelope input-icon"></i>
                    <input id="email" name="email" type="email" class="form-control" placeholder="Email" required />
                    <div id="email_status" class="status-text"></div>
                </div>

                <!-- MOBILE -->
<div class="col input-wrapper" style="position: relative;">
  <!-- Country code / globe icon inside input -->
  <i class="fa fa-globe input-icon"></i>
<input
  id="mobile"
  name="mobile"
  type="tel"
  inputmode="numeric"
  pattern="[0-9]*"
  class="form-control phone-input"
  placeholder="Phone Number"
  required
/>
<div id="mobile_status" class="status-text"></div>

</div>




                <!-- PASSWORD -->
                <div class="col input-wrapper">
                    <i class="fa fa-lock input-icon"></i>
                    <input type="password" id="password" name="password" class="form-control" placeholder="Password" required minlength="6" />
                    <i class="fa fa-eye toggle-pass" onclick="togglePassword('password')"></i>
                    <div id="pass_strength" class="status-text"></div>
                </div>

                <!-- CONFIRM PASSWORD -->
                <div class="col input-wrapper">
                    <i class="fa fa-lock input-icon"></i>
                    <input type="password" id="confirm_password" class="form-control" placeholder="Confirm Password" required minlength="6" />
                    <i class="fa fa-eye toggle-pass" onclick="togglePassword('confirm_password')"></i>
                    <div id="confirm_status" class="status-text"></div>
                </div>

                <!-- LATITUDE -->
          <!-- LATITUDE -->
<div class="col input-wrapper">
    <i class="fa fa-map input-icon"></i>
    <input
        id="lat"
        name="lat"
        type="number"
        step="any"
        inputmode="decimal"
        class="form-control"
        placeholder="Latitude (e.g., 18.5204)"
        required
    />
</div>

<!-- LONGITUDE -->
<div class="col input-wrapper">
    <i class="fa fa-map-location-dot input-icon"></i>
    <input
        id="lng"
        name="lng"
        type="number"
        step="any"
        inputmode="decimal"
        class="form-control"
        placeholder="Longitude (e.g., 73.8567)"
        required
    />
</div>


            </div>

            <button id="registerButton" type="submit" class="btn w-100 mt-4" disabled>Register</button>
        </form>

        <div class="login-link">
            Already have an account? <a href="/login">Login here</a>
        </div>
    </div>

    <script>



        // -------------------- TOGGLE PASSWORD --------------------
function togglePassword(inputId) {
    const passwordInput = document.getElementById(inputId);
    const toggleIcon = passwordInput.nextElementSibling; // assumes eye icon is right after input

    // Save cursor position and focus state
    const cursorPos = passwordInput.selectionStart;
    const wasFocused = document.activeElement === passwordInput;

    // Toggle type
    passwordInput.type = (passwordInput.type === "password") ? "text" : "password";

    // Toggle icon classes
    toggleIcon.classList.toggle("fa-eye");
    toggleIcon.classList.toggle("fa-eye-slash");

    // Restore focus and cursor
    if (wasFocused) {
      requestAnimationFrame(() => {
        passwordInput.focus();
        passwordInput.setSelectionRange(cursorPos, cursorPos);
      });
    }
  }

  // Optional: prevent cursor jump if icon is clicked with mouse down
  document.querySelectorAll(".toggle-pass").forEach(icon => {
    icon.addEventListener("mousedown", e => e.preventDefault());
  });
        const nameInput = document.getElementById("name");
        const usernameInput = document.getElementById("username");
        const emailInput = document.getElementById("email");
        const mobileInput = document.getElementById("mobile");
        const passwordInput = document.getElementById("password");
        const confirmInput = document.getElementById("confirm_password");
        const latInput = document.getElementById("lat");
        const lonInput = document.getElementById("lng");
        const registerBtn = document.getElementById("registerButton");
        const locStatus = document.getElementById("loc_status");
        const input = document.querySelector("#mobile");


// Initialize intl-tel-input with required fallback
const icon = input.parentElement.querySelector(".input-icon");

const iti = window.intlTelInput(input, {
    initialCountry: "us",           // required internally
    separateDialCode: true,
    nationalMode: false,
    autoPlaceholder: "off",
    utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js",
    geoIpLookup: () => {},          // disable IP lookup
});

// Hide internal default number and flag
iti.setNumber("");
input.placeholder = "Select Country";
input.style.color = "#999";
const selectedFlag = input.parentElement.querySelector(".iti__selected-flag");
selectedFlag.style.opacity = 0;

// Prevent typing until a real country is selected
let countrySelected = false;
input.addEventListener("keydown", (e) => {
    if (!countrySelected) e.preventDefault();
});

// Enable typing after country selection
input.addEventListener("countrychange", () => {
    countrySelected = true;
    input.placeholder = "Enter Phone Number";
    input.style.color = "#000";       // normal text
    selectedFlag.style.opacity = 1;   // show flag
    icon.style.display = "none";      // hide the icon
});


        let locationController = null;

        function showStatus(element, message, type) {
            element.innerHTML = `<span class="text-${type}">${message}</span>`;
        }

        function enableRegister() {
            const usernameValid = usernameInput.dataset.valid === "true";
            const emailValid = emailInput.dataset.valid === "true";
            const mobileValid = mobileInput.dataset.valid === "true";
            const passwordStrong = passwordInput.dataset.strong === "true";
            const passwordsMatch = confirmInput.dataset.match === "true";
            const locationValid = latInput.dataset.valid === "true" && lonInput.dataset.valid === "true";
            const nameValid = nameInput.dataset.valid === "true";
            registerBtn.disabled = !(usernameValid && emailValid && mobileValid && passwordStrong && passwordsMatch && locationValid && nameValid);
        }

function getCountryName() {
    const countryData = iti.getSelectedCountryData();
    return countryData.name || countryData.iso2; // Returns country name
}

        // -------------------- USERNAME CHECK --------------------

nameInput.addEventListener("input", () => {
    const val = nameInput.value.trim();
    const status = document.getElementById("name_status");

    if (!val) {
        status.textContent = "";
        nameInput.dataset.valid = "false";
        enableRegister();
        return;
    }

    // Only letters and spaces
    const namePattern = /^[a-zA-Z ]+$/;
    if (!namePattern.test(val)) {
        showStatus(status, "Only letters and spaces allowed", "danger");
        nameInput.dataset.valid = "false";
        enableRegister();
        return;
    }

    // Must have at least two words (first + last name)
    const words = val.split(" ").filter(w => w.length > 0);
    if (words.length < 2) {
        showStatus(status, "Please enter full name (first and last)", "warning");
        nameInput.dataset.valid = "false";
    } else {
        showStatus(status, "✔ Looks good", "success");
        nameInput.dataset.valid = "true";
    }

    enableRegister();
});



let usernameController = null;

usernameInput.addEventListener("input", async () => {
    const val = usernameInput.value.trim();
    const status = document.getElementById("username_status");

    // Abort previous request
    if (usernameController) {
        usernameController.abort();
    }
    usernameController = new AbortController();

    // Clear if empty
    if (!val) {
        status.textContent = "";
        usernameInput.dataset.valid = "false";
        enableRegister();
        return;
    }

    const usernamePattern = /^[a-zA-Z0-9_]+$/;

    if (val.length < 3) {
        showStatus(status, "Too short (min 3 characters)", "danger");
        usernameInput.dataset.valid = "false";
        enableRegister();
        return;
    }

    if (val.length > 20) {
        showStatus(status, "Too long (max 20 characters)", "danger");
        usernameInput.dataset.valid = "false";
        enableRegister();
        return;
    }

    if (!usernamePattern.test(val)) {
        showStatus(status, "Invalid characters (letters, numbers, _ only)", "danger");
        usernameInput.dataset.valid = "false";
        enableRegister();
        return;
    }

    if (/^\d+$/.test(val)) {
        showStatus(status, "Cannot be only numbers", "danger");
        usernameInput.dataset.valid = "false";
        enableRegister();
        return;
    }

    if (/^[a-zA-Z]+$/.test(val)) {
        showStatus(status, "Cannot be only letters", "danger");
        usernameInput.dataset.valid = "false";
        enableRegister();
        return;
    }

    if (/^_|_$/.test(val) || /__/.test(val)) {
        showStatus(status, "Invalid characters (letters, numbers, _ only)", "danger");
        usernameInput.dataset.valid = "false";
        enableRegister();
        return;
    }

    try {
        const res = await fetch(
            `/check_username?username=${encodeURIComponent(val)}`,
            { signal: usernameController.signal }
        );
        const data = await res.json();

        // Extra safety: input still same?
        if (usernameInput.value.trim() !== val) return;

        if (data.available) {
            showStatus(status, "✔ Available", "success");
            usernameInput.dataset.valid = "true";
        } else {
            showStatus(status, "✖ Already taken", "danger");
            usernameInput.dataset.valid = "false";
        }
    } catch (err) {
        if (err.name !== "AbortError") {
            showStatus(status, "⚠ Error checking username", "warning");
            usernameInput.dataset.valid = "false";
        }
    }

    enableRegister();
});


        // -------------------- EMAIL CHECK --------------------
 let emailController = null;

emailInput.addEventListener("input", async () => {
    const val = emailInput.value.trim();
    const status = document.getElementById("email_status");

    // Abort previous request
    if (emailController) {
        emailController.abort();
    }
    emailController = new AbortController();

    if (!val) {
        status.textContent = "";
        emailInput.dataset.valid = "false";
        enableRegister();
        return;
    }

    const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

    if (!emailPattern.test(val)) {
        showStatus(status, "Invalid email format", "danger");
        emailInput.dataset.valid = "false";
        enableRegister();
        return;
    }

    try {
        const res = await fetch(
            `/check_email?email=${encodeURIComponent(val)}`,
            { signal: emailController.signal }
        );
        const data = await res.json();

        // Extra safety: input abhi bhi same hai ya nahi
        if (emailInput.value.trim() !== val) return;

        if (data.available) {
            showStatus(status, "✔ Available", "success");
            emailInput.dataset.valid = "true";
        } else {
            showStatus(status, "✖ Already registered", "danger");
            emailInput.dataset.valid = "false";
        }
    } catch (err) {
        if (err.name !== "AbortError") {
            showStatus(status, "⚠ Error checking email", "warning");
            emailInput.dataset.valid = "false";
        }
    }

    enableRegister();
});

        // -------------------- MOBILE CHECK --------------------

 // Revalidate when country changes
mobileInput.addEventListener("countrychange", () => {
    const statusBox = document.getElementById("mobile_status");

    // Clear previous messages
    statusBox.textContent = "";

    // Clear number formatting (keep local only)
    mobileInput.value = "";

    // Remove previous validation
    mobileInput.dataset.valid = "false";

    // Focus input
    mobileInput.focus();
});


mobileInput.addEventListener("input", () => {
    const statusBox = document.getElementById("mobile_status");
    const val = mobileInput.value.trim();

    if (!val) {
        statusBox.textContent = "";
        mobileInput.dataset.valid = "false";
        enableRegister(); // <-- add this
        return;
    }

    if (iti.isValidNumber()) {
        const country = iti.getSelectedCountryData();

        statusBox.innerHTML =
            `<span class="text-success">✔ Valid number (${country.name})</span>`;

        mobileInput.dataset.valid = "true";
    }
    else {
        statusBox.innerHTML =
            `<span class="text-danger">Invalid phone number</span>`;

        mobileInput.dataset.valid = "false";
    }

    enableRegister(); // <-- add this
});

        // -------------------- PASSWORD STRENGTH --------------------
passwordInput.addEventListener("input", () => {
    const val = passwordInput.value.trim();
    const status = document.getElementById("pass_strength");

    // Empty → clear
    if (!val) {
        status.textContent = "";
        passwordInput.dataset.strong = "false";
        enableRegister();
        return;
    }

    // Minimum length
    if (val.length < 6) {
        showStatus(status, "Too short (min 6 characters)", "danger");
        passwordInput.dataset.strong = "false";
        enableRegister();
        return;
    }

    // Character class checks
    const hasUpper = /[A-Z]/.test(val);
    const hasLower = /[a-z]/.test(val);
    const hasNumber = /[0-9]/.test(val);
    const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(val);

    if (!hasUpper || !hasLower || !hasNumber || !hasSpecial) {
        showStatus(
            status,
            "Must include uppercase, lowercase, number & special char",
            "danger"
        );
        passwordInput.dataset.strong = "false";
        enableRegister();
        return;
    }

    // Extra credit for long passwords
    let strength = 0;
    if (val.length >= 6) strength++;
    if (val.length >= 10) strength++;
    if (hasUpper) strength++;
    if (hasLower) strength++;
    if (hasNumber) strength++;
    if (hasSpecial) strength++;

    // Determine strength level
    if (strength <= 3) {
        showStatus(status, "Weak", "danger");
        passwordInput.dataset.strong = "false";
    } else if (strength <= 5) {
        showStatus(status, "Medium", "warning");
        passwordInput.dataset.strong = "false";
    } else {
        showStatus(status, "Strong", "success");
        passwordInput.dataset.strong = "true";
    }

    checkPasswordMatch();
    enableRegister();
});



        confirmInput.addEventListener("input", () => {
            checkPasswordMatch();
            enableRegister();
        });

        function checkPasswordMatch() {
            const status = document.getElementById("confirm_status");
            if (!confirmInput.value) {
                status.textContent = "";
                confirmInput.dataset.match = "false";
                return;
            }
            if (passwordInput.value === confirmInput.value && confirmInput.value.length >= 6) {
                showStatus(status, "Passwords match", "success");
                confirmInput.dataset.match = "true";
            } else {
                showStatus(status, "Passwords do not match", "danger");
                confirmInput.dataset.match = "false";
            }
        }

        // -------------------- LAT/LNG VALIDATION --------------------
 async function validateLocation() {
    const latStr = latInput.value.trim();
    const lonStr = lonInput.value.trim();

    // Abort any ongoing fetch immediately
    if (locationController) locationController.abort();
    locationController = null;

    // Reset by default
    locStatus.className = "alert d-none";
    locStatus.textContent = "";
    latInput.dataset.valid = "false";
    lonInput.dataset.valid = "false";
    registerBtn.disabled = true;

    // If both fields are empty → just reset
    if (!latStr && !lonStr) return;

    // If one is empty → show error and return
    if (!latStr || !lonStr) {
        locStatus.className = "alert alert-danger";
        locStatus.textContent = "❌ Enter both latitude and longitude.";
        return;
    }

    // Decimal number check
    const regex = /^-?\d+(\.\d+)?$/;
    if (!regex.test(latStr) || !regex.test(lonStr)) {
        locStatus.className = "alert alert-danger";
        locStatus.textContent = "❌ Use valid decimal format (e.g., 18.5204, 73.8567)";
        return;
    }

    const lat = parseFloat(latStr);
    const lon = parseFloat(lonStr);

    if (lat < -90 || lat > 90) {
        locStatus.className = "alert alert-danger";
        locStatus.textContent = "❌ Latitude must be between -90 and +90.";
        return;
    }

    if (lon < -180 || lon > 180) {
        locStatus.className = "alert alert-danger";
        locStatus.textContent = "❌ Longitude must be between -180 and +180.";
        return;
    }

    // ⚠ AUTO-WARNING FOR MISSING NEGATIVE SIGN (USA, Canada, South America)
    if (lat > 0 && lon > 0) {
        const likelyWestern = [
            { latMin: 24, latMax: 49, lonMin: 66, lonMax: 125 },   // USA
            { latMin: 42, latMax: 83, lonMin: 52, lonMax: 95 },    // Canada
            { latMin: -56, latMax: 13, lonMin: 34, lonMax: 81 },   // South America
        ];

        const needsNegative = likelyWestern.some(region =>
            lat >= region.latMin &&
            lat <= region.latMax &&
            lon >= region.lonMin &&
            lon <= region.lonMax
        );

        if (needsNegative) {
            locStatus.className = "alert alert-warning";
            locStatus.textContent =
                "⚠ Did you forget the negative sign? These regions use negative (-) longitude.";
            return;
        }
    }

    // Start fetch for reverse geocoding
    locationController = new AbortController();
    const signal = locationController.signal;

    locStatus.className = "alert alert-info";
    locStatus.textContent = "Checking location…";

    try {
        const res = await fetch(
            `https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`,
            {
                signal,
                headers: {
                    "User-Agent": "DisasterAlertSystem/1.0 (contact@example.com)"
                }
            }
        );

        const data = await res.json();

        // Check if user cleared fields during fetch
        if (!latInput.value.trim() && !lonInput.value.trim()) {
            locStatus.className = "alert d-none";
            locStatus.textContent = "";
            latInput.dataset.valid = "false";
            lonInput.dataset.valid = "false";
            enableRegister();
            return;
        }

        // GLOBAL FIX: accept if display_name exists
        if (data && (data.address || data.display_name)) {
            locStatus.className = "alert alert-success";
            locStatus.textContent =
                "✔ Location found: " + (data.display_name || "Valid coordinates");
            latInput.dataset.valid = "true";
            lonInput.dataset.valid = "true";
        } else {
            locStatus.className = "alert alert-danger";
            locStatus.textContent =
                "❌ No place found for these coordinates.";
            latInput.dataset.valid = "false";
            lonInput.dataset.valid = "false";
        }

    } catch (e) {
        if (e.name !== "AbortError") {
            locStatus.className = "alert alert-warning";
            locStatus.textContent =
                "⚠ Network error while validating location.";
            latInput.dataset.valid = "false";
            lonInput.dataset.valid = "false";
        }
    }

    enableRegister();
}


        latInput.addEventListener("input", validateLocation);
        lonInput.addEventListener("input", validateLocation);

        // -------------------- FORM SUBMIT --------------------
// -------------------- FORM SUBMIT (FINAL + CLEANED) --------------------
document.getElementById("registerForm").addEventListener("submit", function (e) {

    // Block if passwords don't match (extra safety)
    if (passwordInput.value !== confirmInput.value) {
        e.preventDefault();
        alert("Passwords do not match!");
        return;
    }

    // Confirmation message before final submission
    const confirmed = confirm("Are you sure all details are correct?");
    if (!confirmed) {
        e.preventDefault();
        return;
    }
});


    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.2.1/js/intlTelInput.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.2.1/js/utils.js"></script>
</body>

</html>
