<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin System Settings</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
  body {
    font-family: 'Poppins', sans-serif;
    min-height: 100vh;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 30px;
  }

  .glass-card {
    max-width: 750px;
    width: 100%;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border-radius: 18px;
    border: 1px solid rgba(255, 255, 255, 0.25);
    box-shadow: 0 20px 40px rgba(0,0,0,0.35);
    color: #fff;
  }

  .glass-card h2 {
    font-weight: 600;
    letter-spacing: 0.5px;
  }

  label {
    font-size: 14px;
    opacity: 0.9;
  }

  .form-control {
    background: rgba(255,255,255,0.15);
    border: none;
    color: #fff;
    border-radius: 10px;
  }

  .form-control::placeholder {
    color: rgba(255,255,255,0.6);
  }

  .form-control:focus {
    background: rgba(255,255,255,0.25);
    color: #fff;
    box-shadow: 0 0 0 2px rgba(13,110,253,0.5);
  }

  .form-check-input {
    background-color: rgba(255,255,255,0.3);
    border: none;
  }

  hr {
    border-color: rgba(255,255,255,0.25);
  }

  .btn-primary {
    border-radius: 12px;
    font-weight: 500;
  }

  .btn-outline-success {
    border-radius: 12px;
    color: #fff;
    border-color: #28a745;
  }

  .btn-outline-success:hover {
    background-color: #28a745;
  }

  .btn-secondary {
    border-radius: 12px;
  }

  .alert {
    backdrop-filter: blur(10px);
    border-radius: 12px;
  }
</style>
</head>

<body>

<div class="glass-card p-4">

  <h2 class="mb-4 text-center">‚öôÔ∏è System Settings</h2>

  <!-- FLASH MESSAGES -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form method="POST">

    <!-- FLOOD -->
    <h5 class="mb-3">üåßÔ∏è Flood Configuration</h5>

    <div class="mb-3">
      <label>Rainfall Threshold (mm/hr)</label>
      <input type="number" step="0.1" name="rainfall_threshold"
             class="form-control"
             value="{{ settings.rainfall_threshold }}">
    </div>

    <div class="form-check mb-4">
      <input class="form-check-input" type="checkbox" name="flood_alert"
             {% if settings.flood_alert_enabled %}checked{% endif %}>
      <label class="form-check-label">Enable Flood Auto Alerts</label>
    </div>

    <hr>

    <!-- EARTHQUAKE -->
    <h5 class="mb-3">üåç Earthquake Configuration</h5>

    <div class="mb-3">
      <label>Minimum Magnitude</label>
      <input type="number" step="0.1" name="earthquake_magnitude"
             class="form-control"
             value="{{ settings.earthquake_magnitude }}">
    </div>

    <hr>

    <!-- SMTP -->
    <h5 class="mb-3">üìß SMTP Email Settings</h5>

    <div class="mb-3">
      <label>Sender Email</label>
      <input type="email" name="smtp_email"
             class="form-control"
             value="{{ settings.smtp_email }}">
    </div>

    <div class="mb-3">
      <label>App Password</label>
      <input type="password" name="smtp_password"
             class="form-control"
             placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    </div>

    <button type="submit" class="btn btn-primary w-100 mt-3">
      üíæ Save Settings
    </button>

    <a href="/admin/test_email" class="btn btn-outline-success w-100 mt-2">
      üìß Send Test Email
    </a>

  </form>

  <a href="/admin/dashboard" class="btn btn-secondary w-100 mt-3">
    ‚¨Ö Back to Dashboard
  </a>

</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- AUTO DISMISS ALERT -->
<script>
  setTimeout(() => {
    document.querySelectorAll('.alert').forEach(alert => {
      new bootstrap.Alert(alert).close();
    });
  }, 5000);
</script>

</body>
</html>
